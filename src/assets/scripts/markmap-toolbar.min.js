/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/markmap-common@0.18.9/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const testPath="npm2url/dist/index.cjs",defaultProviders={jsdelivr:e=>`https://cdn.jsdelivr.net/npm/${e}`,unpkg:e=>`https://unpkg.com/${e}`};async function checkUrl(e,t){const r=await fetch(e,{signal:t});if(!r.ok)throw r;await r.text()}class UrlBuilder{constructor(){this.providers={...defaultProviders},this.provider="jsdelivr"}async getFastestProvider(e=5e3,t=testPath){const r=new AbortController;let n=0;try{return await new Promise(((o,s)=>{Promise.all(Object.entries(this.providers).map((async([e,n])=>{try{await checkUrl(n(t),r.signal),o(e)}catch{}}))).then((()=>s(new Error("All providers failed")))),n=setTimeout(s,e,new Error("Timed out"))}))}finally{r.abort(),clearTimeout(n)}}async findFastestProvider(e,t){return this.provider=await this.getFastestProvider(e,t),this.provider}setProvider(e,t){t?this.providers[e]=t:delete this.providers[e]}getFullUrl(e,t=this.provider){if(e.includes("://"))return e;const r=this.providers[t];if(!r)throw new Error(`Provider ${t} not found`);return r(e)}}const urlBuilder=new UrlBuilder;class Hook{constructor(){this.listeners=[]}tap(e){return this.listeners.push(e),()=>this.revoke(e)}revoke(e){const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}revokeAll(){this.listeners.splice(0)}call(...e){for(const t of this.listeners)t(...e)}}const escapeChars={"&":"&amp;","<":"&lt;",'"':"&quot;"};function escapeHtml(e){return e.replace(/[&<"]/g,(e=>escapeChars[e]))}function escapeScript(e){return e.replace(/<(\/script>)/g,"\\x3c$2")}function htmlOpen(e,t){return`<${e}${t?Object.entries(t).map((([e,t])=>{if(null!=t&&!1!==t)return e=` ${escapeHtml(e)}`,!0===t?e:`${e}="${escapeHtml(t)}"`})).filter(Boolean).join(""):""}>`}function htmlClose(e){return`</${e}>`}function wrapHtml(e,t,r){return null==t?htmlOpen(e,r):htmlOpen(e,r)+(t||"")+htmlClose(e)}function buildCode(e,t){const r=t.map((e=>"function"==typeof e?e.toString():JSON.stringify(e??null))).join(",");return`(${e.toString()})(${r})`}function persistJS(e,t){return e.map((e=>{if("script"===e.type){const{textContent:t,...r}=e.data;return wrapHtml("script",t||"",r)}if("iife"===e.type){const{fn:r,getParams:n}=e.data;return wrapHtml("script",escapeScript(buildCode(r,(null==n?void 0:n(t))||[])))}return""}))}function persistCSS(e){return e.map((e=>"stylesheet"===e.type?wrapHtml("link",null,{rel:"stylesheet",...e.data}):wrapHtml("style",e.data)))}const uniqId=Math.random().toString(36).slice(2,8);let globalIndex=0;function getId(){return globalIndex+=1,`mm-${uniqId}-${globalIndex}`}function noop(){}function walkTree(e,t){const r=(e,n)=>t(e,(()=>{var t;return null==(t=e.children)?void 0:t.map((t=>r(t,e)))}),n);return r(e)}function addClass(e,...t){const r=(e||"").split(" ").filter(Boolean);return t.forEach((e=>{e&&r.indexOf(e)<0&&r.push(e)})),r.join(" ")}function wrapFunction(e,t){return(...r)=>t(e,...r)}function defer(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}function memoize(e){const t={};return function(...r){const n=`${r[0]}`;let o=t[n];return o||(o={value:e(...r)},t[n]=o),o.value}}function debounce(e,t){const r={timer:0};function n(){r.timer&&(window.clearTimeout(r.timer),r.timer=0)}function o(){n(),r.args&&(r.result=e(...r.args))}return function(...e){return n(),r.args=e,r.timer=window.setTimeout(o,t),r.result}}
/*! @gera2ld/jsx-dom v2.2.2 | ISC License */const VTYPE_ELEMENT=1,VTYPE_FUNCTION=2,SVG_NS="http://www.w3.org/2000/svg",XLINK_NS="http://www.w3.org/1999/xlink",NS_ATTRS={show:XLINK_NS,actuate:XLINK_NS,href:XLINK_NS},isLeaf=e=>"string"==typeof e||"number"==typeof e,isElement=e=>1===(null==e?void 0:e.vtype),isRenderFunction=e=>2===(null==e?void 0:e.vtype);function h(e,t,...r){return jsx(e,t=Object.assign({},t,{children:1===r.length?r[0]:r}))}function jsx(e,t){let r;if("string"==typeof e)r=1;else{if("function"!=typeof e)throw new Error("Invalid VNode type");r=2}return{vtype:r,type:e,props:t}}function Fragment(e){return e.children}const DEFAULT_ENV={isSvg:!1};function insertDom(e,t){Array.isArray(t)||(t=[t]),(t=t.filter(Boolean)).length&&e.append(...t)}function mountAttributes(e,t,r){for(const n in t)if("key"!==n&&"children"!==n&&"ref"!==n)if("dangerouslySetInnerHTML"===n)e.innerHTML=t[n].__html;else if("innerHTML"===n||"textContent"===n||"innerText"===n||"value"===n&&["textarea","select"].includes(e.tagName)){const r=t[n];null!=r&&(e[n]=r)}else n.startsWith("on")?e[n.toLowerCase()]=t[n]:setDOMAttribute(e,n,t[n],r.isSvg)}const attrMap={className:"class",labelFor:"for"};function setDOMAttribute(e,t,r,n){if(t=attrMap[t]||t,!0===r)e.setAttribute(t,"");else if(!1===r)e.removeAttribute(t);else{const o=n?NS_ATTRS[t]:void 0;void 0!==o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}}function flatten(e){return e.reduce(((e,t)=>e.concat(t)),[])}function mountChildren(e,t){return Array.isArray(e)?flatten(e.map((e=>mountChildren(e,t)))):mount(e,t)}function mount(e,t=DEFAULT_ENV){if(null==e||"boolean"==typeof e)return null;if(e instanceof Node)return e;if(isRenderFunction(e)){const{type:r,props:n}=e;if(r===Fragment){const e=document.createDocumentFragment();if(n.children){insertDom(e,mountChildren(n.children,t))}return e}return mount(r(n),t)}if(isLeaf(e))return document.createTextNode(`${e}`);if(isElement(e)){let r;const{type:n,props:o}=e;if(t.isSvg||"svg"!==n||(t=Object.assign({},t,{isSvg:!0})),r=t.isSvg?document.createElementNS(SVG_NS,n):document.createElement(n),mountAttributes(r,o,t),o.children){let e=t;t.isSvg&&"foreignObject"===n&&(e=Object.assign({},e,{isSvg:!1}));const s=mountChildren(o.children,e);null!=s&&insertDom(r,s)}const{ref:s}=o;return"function"==typeof s&&s(r),r}throw new Error("mount: Invalid Vnode!")}function mountDom(e){return mount(e)}function hm(...e){return mountDom(h(...e))}const memoizedPreloadJS=memoize((e=>{document.head.append(hm("link",{rel:"preload",as:"script",href:e}))})),jsCache={},cssCache={};async function loadJSItem(e,t){var r;const n="script"===e.type&&(null==(r=e.data)?void 0:r.src)||"";if(e.loaded||(e.loaded=jsCache[n]),!e.loaded){const r=defer();if(e.loaded=r.promise,"script"===e.type&&(document.head.append(hm("script",{...e.data,onLoad:()=>r.resolve(),onError:r.reject})),n?jsCache[n]=e.loaded:r.resolve()),"iife"===e.type){const{fn:n,getParams:o}=e.data;n(...(null==o?void 0:o(t))||[]),r.resolve()}}await e.loaded}async function loadCSSItem(e){const t="stylesheet"===e.type&&e.data.href||"";if(e.loaded||(e.loaded=cssCache[t]),!e.loaded){const r=defer();e.loaded=r.promise,t&&(cssCache[t]=e.loaded),"style"===e.type?(document.head.append(hm("style",{textContent:e.data})),r.resolve()):t&&(document.head.append(hm("link",{rel:"stylesheet",...e.data})),fetch(t).then((e=>{if(e.ok)return e.text();throw e})).then((()=>r.resolve()),r.reject))}await e.loaded}async function loadJS(e,t){e.forEach((e=>{var t;"script"===e.type&&(null==(t=e.data)?void 0:t.src)&&memoizedPreloadJS(e.data.src)})),t={getMarkmap:()=>window.markmap,...t};for(const r of e)await loadJSItem(r,t)}async function loadCSS(e){await Promise.all(e.map((e=>loadCSSItem(e))))}function buildJSItem(e){return{type:"script",data:{src:e}}}function buildCSSItem(e){return{type:"stylesheet",data:{href:e}}}function extractAssets(e){var t,r;return[...(null==(t=e.scripts)?void 0:t.map((e=>"script"===e.type&&e.data.src||"")))||[],...(null==(r=e.styles)?void 0:r.map((e=>"stylesheet"===e.type&&e.data.href||"")))||[]].filter(Boolean)}function mergeAssets(...e){return{styles:e.flatMap((e=>(null==e?void 0:e.styles)||[])),scripts:e.flatMap((e=>(null==e?void 0:e.scripts)||[]))}}exports.Hook=Hook,exports.UrlBuilder=UrlBuilder,exports.addClass=addClass,exports.buildCSSItem=buildCSSItem,exports.buildCode=buildCode,exports.buildJSItem=buildJSItem,exports.debounce=debounce,exports.defer=defer,exports.escapeHtml=escapeHtml,exports.escapeScript=escapeScript,exports.extractAssets=extractAssets,exports.getId=getId,exports.htmlClose=htmlClose,exports.htmlOpen=htmlOpen,exports.loadCSS=loadCSS,exports.loadJS=loadJS,exports.memoize=memoize,exports.mergeAssets=mergeAssets,exports.noop=noop,exports.persistCSS=persistCSS,exports.persistJS=persistJS,exports.urlBuilder=urlBuilder,exports.walkTree=walkTree,exports.wrapFunction=wrapFunction,exports.wrapHtml=wrapHtml;
//# sourceMappingURL=/sm/ca26ec260def4673fb8787c977941db66c1423993a790f2276f617a43ffa552b.map